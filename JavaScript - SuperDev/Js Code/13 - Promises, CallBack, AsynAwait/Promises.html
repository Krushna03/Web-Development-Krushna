<!DOCTYPE html>
<html lang="en">
<head>
   <meta charset="UTF-8">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <title>Document</title>
</head>
<body>
   <script>
//Promise = An object that manages asynchronous operations.
//          Wrap a promise object around (asynchronous code)
//          "I promise to return a value"
//           PENDING -> RESOLVED or REJECTED
//           new Promise((resolve,reject) => {asynchronous code})

//TASK: Do tasks in a order 
// 1. Walk the dog
// 2. Clean the kithen 
// 3. Take ou the trash

//Note : promise fails and return reject , when unable to do some task

   function walkdog() {
      return new Promise((resolve,reject) => {
          setTimeout( () => {
            
            const dogWalked = true;
            if(dogWalked) {
               resolve('You walk the dog ');
            }
            else {
               reject("You DIDN'T walk the dog");
            }

          }, 1500)
       });
   };

   function cleanKitchen() {
      return new Promise((resolve,reject) => {
          setTimeout( () => {

            const kitchenCleaned = true;
            if(kitchenCleaned) {
               resolve('You clean the kitchen');
            }
            else {
               reject("You DIDN'T clean the kitchen");
            }
             
          }, 2500)
       });
   };


   function takeOutTrash() {
      return new Promise((resolve,reject) => {
          setTimeout( () => {

            const trashTakeOut = false;
            if(trashTakeOut) {
               resolve('You take out the trash');
            }
            else {
               reject("You DIDN'T  take out the trash");
            }
             
          }, 500)
       });
   };


   walkdog().then((value) => {
            console.log(value);
            return cleanKitchen();
          })
          .then((value) => {
            console.log(value);
            return takeOutTrash();
          })
          .then((value) => {
            console.log(value);
            console.log("You finished all the tasks");
          })
          .catch((error) => console.error(error));





   // let promise = new Promise((resolve,rejet) => {
   //         console.log('This is promise');
   //       //   resolve(123);
   //         reject('Some error');
   //  });


   //  function getData1(dataId1 , nextDataId1) {
   //     return new Promise((resolve,reject) =>{
   //       setTimeout(() => {
   //         console.log('data' , dataId1);
   //         resolve('Success'); 
   //         if(getNextData1){
   //       getNextData1();
   //     }
   //    }, 2000);
   //   });
   //  };


      //Promise : then 
      const getPromise = () => {
         return new Promise((resolve, rejcet) => {
         console.log('I am promise');
         resolve('success');
         });
      };

      //Then: as promise is resolved then perform the task.
      let promise1 = getPromise();
         promise1.then( () => {
            console.log('promise fulfilled');
         });


      //promise chaining 
      //Its a API thing 
      function asynFunc1() {
         return new Promise((resolve,reject) => {
            setTimeout(() => {
            console.log('data1');
            resolve('success');
            }, 3000);
         });
      };
      function asynFunc2() {
         return new Promise((resolve,reject) => {
            setTimeout(() => {
            console.log('data2');
            resolve('success');
            }, 3000);
         });
      };

      //This Thing for coder is imp
      console.log('fetching data1....');
      let p1 = asynFunc1();
      p1.then((res) => {
         // console.log(res);

      console.log('fetching data2....');   
      let p2 = asynFunc2();
      p2.then((res) => {
         // console.log(res);
      });
      });

      //ShortCut
      console.log('fetching data1....');
      asynFunc1().then((res) => {

      console.log('fetching data2....');   
      asynFunc2().then((res) => {});
      });
      


      function getData(dataId){
         return new Promise((resolve,reject) => {
            setTimeout( () => {
               console.log('data', dataId);
               resolve('success');
            }, 6000);
         });
         }

      getData(1).then((res) => {
         console.log(res);
      getData(2).then(() => {
         console.log(res);
      })
   });


   //another shortcut / way promise chain
   getData(1)
    .then((res) => {
         return getData(2);
   })
    .then((res) => {
         return getData(3);
   })
    .then((res) => {
        console.log(res);
   });


   </script>
</body>
</html>